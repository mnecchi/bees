(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b(require('follow-redirects')):'function'==typeof define&&define.amd?define(['follow-redirects'],b):'object'==typeof exports?exports.bees=b(require('follow-redirects')):a.bees=b(a['follow-redirects'])})(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=13)}([function(a,b,c){'use strict';b.decode=b.parse=c(7),b.encode=b.stringify=c(8)},function(a){'use strict';a.exports=class{constructor(a){this.message=a.message||'',this.code=a.code||0,this.isAborted=!0===a.isAborted}}},function(a,b,c){'use strict';const d=c(9),e=c(0),f=c(14),g=c(15),h=c(1);a.exports=class{fetch(a,b={},c=()=>{},i=()=>{},j=()=>{}){const k=d.parse(a),{protocol:l,hostname:m,port:n,pathname:o,query:p}=k;let{path:q}=k;const{timeout:r}=b;let{method:s,data:t,headers:u}=b;if(s=(s||'GET').trim().toUpperCase(),u=u||{},t=t||{},-1===['GET','POST'].indexOf(s))j({message:`Invalid method: ${s}`,code:-1});else{let a='';a='GET'===s?e.stringify(Object.assign(e.parse(p),t)):p,q=`${o}${''===a?'':'?'}${a}`;let b={method:s,protocol:l,hostname:m,port:null===n?'https:'===l?443:80:n,path:q,headers:u,data:t};void 0!==r&&(b.timeout=r),this.doFetch(b,(a)=>{i(new g(a))},(a)=>{j(new h(a))},(a)=>{c(new f(a))})}}doFetch(){return null}}},function(a){function b(){throw new Error('setTimeout has not been defined')}function c(){throw new Error('clearTimeout has not been defined')}function d(a){if(j===setTimeout)return setTimeout(a,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function e(a){if(k===clearTimeout)return clearTimeout(a);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=d(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,e(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};(function(){try{j='function'==typeof setTimeout?setTimeout:b}catch(a){j=b}try{k='function'==typeof clearTimeout?clearTimeout:c}catch(a){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(a,b,c){'use strict';const d=c(2),e=c(16),f=c(0);a.exports=class extends d{doFetch(a,b,c,d){const g='https:'===a.protocol?e.https:e.http;let h='';const i=g.request(a,(a)=>{a.setEncoding('utf-8'),200!==a.statusCode&&c({message:g.STATUS_CODES[a.statusCode],code:a.statusCode}),a.on('data',(a)=>{h+=a}),a.on('end',()=>{b(h)})});i.on('error',(a)=>{c(a)}),i.on('abort',()=>{c({isAborted:!0})}),'POST'===a.method&&i.write(f.stringify(a.data)),i.end(),d(i)}}},function(a,b,c){'use strict';const d=c(2),e=c(0);a.exports=class extends d{doFetch(a,b,c,d){const{protocol:f,hostname:g,port:h,method:i,timeout:j,path:k,headers:l,data:m}=a,n=new XMLHttpRequest;n.open(i,`${f}//${g}:${h}${k}`,!0),'undefined'!=typeof j&&(n.timeout=j),Object.keys(l).map((a)=>{n.setRequestHeader(a,l[a])}),n.onreadystatechange=()=>{4===n.readyState&&(200===n.status?b(n.responseText):c({message:n.statusText,code:n.status,isAborted:!0===n.isAborted}))},n.send('POST'==i?e.stringify(m):null),d(n)}}},function(a,b,c){(function(a,d){var e;(function(f){function g(a){throw new RangeError(G[a])}function h(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function i(a,b){var c=a.split('@'),d='';1<c.length&&(d=c[0]+'@',a=c[1]),a=a.replace(F,'.');var e=a.split('.'),f=h(e,b).join('.');return d+f}function k(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),55296<=b&&56319>=b&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function l(a){return h(a,function(a){var b='';return 65535<a&&(a-=65536,b+=J(55296|1023&a>>>10),a=56320|1023&a),b+=J(a),b}).join('')}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:v}function m(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function o(a,b,c){var d=0;for(a=c?I(a/z):a>>1,a+=I(a/b);a>H*y>>1;d+=v)a=I(a/H);return I(d+(H+1)*a/(a+w))}function n(a){var b,c,d,e,f,h,m,k,p,q,r=[],s=a.length,t=0,i=B,n=A;for(c=a.lastIndexOf(C),0>c&&(c=0),d=0;d<c;++d)128<=a.charCodeAt(d)&&g('not-basic'),r.push(a.charCodeAt(d));for(e=0<c?c+1:0;e<s;){for(f=t,h=1,m=v;;m+=v){if(e>=s&&g('invalid-input'),k=j(a.charCodeAt(e++)),(k>=v||k>I((u-t)/h))&&g('overflow'),t+=k*h,p=m<=n?x:m>=n+y?y:m-n,k<p)break;q=v-p,h>I(u/q)&&g('overflow'),h*=q}b=r.length+1,n=o(t-f,b,0==f),I(t/b)>u-i&&g('overflow'),i+=I(t/b),t%=b,r.splice(t++,0,i)}return l(r)}function p(a){var b,c,d,e,f,h,i,j,l,n,p,q,r,s,t,w=[];for(a=k(a),q=a.length,b=B,c=0,f=A,h=0;h<q;++h)p=a[h],128>p&&w.push(J(p));for(d=e=w.length,e&&w.push(C);d<q;){for(i=u,h=0;h<q;++h)p=a[h],p>=b&&p<i&&(i=p);for(r=d+1,i-b>I((u-c)/r)&&g('overflow'),c+=(i-b)*r,b=i,h=0;h<q;++h)if(p=a[h],p<b&&++c>u&&g('overflow'),p==b){for(j=c,l=v;;l+=v){if(n=l<=f?x:l>=f+y?y:l-f,j<n)break;t=j-n,s=v-n,w.push(J(m(n+t%s,0))),j=I(t/s)}w.push(J(m(j,0))),f=o(c,r,d==e),c=0,++d}++c,++b}return w.join('')}var q='object'==typeof b&&b&&!b.nodeType&&b,r='object'==typeof a&&a&&!a.nodeType&&a,s='object'==typeof d&&d;(s.global===s||s.window===s||s.self===s)&&(f=s);var t,u=2147483647,v=36,x=1,y=26,w=38,z=700,A=72,B=128,C='-',D=/^xn--/,E=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,G={overflow:'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'},H=v-x,I=Math.floor,J=String.fromCharCode;t={version:'1.4.1',ucs2:{decode:k,encode:l},decode:n,encode:p,toASCII:function(a){return i(a,function(a){return E.test(a)?'xn--'+p(a):a})},toUnicode:function(a){return i(a,function(a){return D.test(a)?n(a.slice(4).toLowerCase()):a})}};e=function(){return t}.call(b,c,b,a),!(void 0!==e&&(a.exports=e))})(this)}).call(b,c(12)(a),c(11))},function(a){'use strict';function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}a.exports=function(a,d,e,f){d=d||'&',e=e||'=';var g={};if('string'!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(d);var j=1e3;f&&'number'==typeof f.maxKeys&&(j=f.maxKeys);var l=a.length;0<j&&l>j&&(l=j);for(var m=0;m<l;++m){var i,n,o,k,p=a[m].replace(h,'%20'),q=p.indexOf(e);0<=q?(i=p.substr(0,q),n=p.substr(q+1)):(i=p,n=''),o=decodeURIComponent(i),k=decodeURIComponent(n),b(g,o)?c(g[o])?g[o].push(k):g[o]=[g[o],k]:g[o]=k}return g};var c=Array.isArray||function(a){return'[object Array]'===Object.prototype.toString.call(a)}},function(a){'use strict';function b(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var c=function(a){switch(typeof a){case'string':return a;case'boolean':return a?'true':'false';case'number':return isFinite(a)?a:'';default:return'';}};a.exports=function(a,f,g,h){return f=f||'&',g=g||'=',null===a&&(a=void 0),'object'==typeof a?b(e(a),function(e){var h=encodeURIComponent(c(e))+g;return d(a[e])?b(a[e],function(a){return h+encodeURIComponent(c(a))}).join(f):h+encodeURIComponent(c(a[e]))}).join(f):h?encodeURIComponent(c(h))+g+encodeURIComponent(c(a)):''};var d=Array.isArray||function(a){return'[object Array]'===Object.prototype.toString.call(a)},e=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},function(a,b,c){'use strict';function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&g.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}var f=c(6),g=c(10);b.parse=e,b.resolve=function(a,b){return e(a,!1,!0).resolve(b)},b.resolveObject=function(a,b){return a?e(a,!1,!0).resolveObject(b):b},b.format=function(a){return g.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)},b.Url=d;var m=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,j=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),k=['\''].concat(j),l=['%','/','?',';','#'].concat(k),n=['/','?','#'],o=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,'javascript:':!0},r={javascript:!0,'javascript:':!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,'http:':!0,'https:':!0,'ftp:':!0,'gopher:':!0,'file:':!0},u=c(0);d.prototype.parse=function(a,b,c){if(!g.isString(a))throw new TypeError('Parameter \'url\' must be a string, not '+typeof a);var d=a.indexOf('?'),e=-1!==d&&d<a.indexOf('#')?'?':'#',v=a.split(e),w=/\\/g;v[0]=v[0].replace(w,'/'),a=v.join(e);var x=a;if(x=x.trim(),!c&&1===a.split('#').length){var y=i.exec(x);if(y)return this.path=x,this.href=x,this.pathname=y[1],y[2]?(this.search=y[2],this.query=b?u.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search='',this.query={}),this}var z=m.exec(x);if(z){z=z[0];var A=z.toLowerCase();this.protocol=A,x=x.substr(z.length)}if(c||z||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var B='//'===x.substr(0,2);B&&!(z&&r[z])&&(x=x.substr(2),this.slashes=!0)}if(!r[z]&&(B||z&&!t[z])){for(var C,D=-1,E=0;E<n.length;E++)C=x.indexOf(n[E]),-1!==C&&(-1==D||C<D)&&(D=C);var F,G;G=-1===D?x.lastIndexOf('@'):x.lastIndexOf('@',D),-1!==G&&(F=x.slice(0,G),x=x.slice(G+1),this.auth=decodeURIComponent(F)),D=-1;for(var C,E=0;E<l.length;E++)C=x.indexOf(l[E]),-1!==C&&(-1===D||C<D)&&(D=C);-1===D&&(D=x.length),this.host=x.slice(0,D),x=x.slice(D),this.parseHost(),this.hostname=this.hostname||'';var H='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!H)for(var I,J=this.hostname.split(/\./),E=0,K=J.length;E<K;E++)if(I=J[E],I&&!I.match(o)){for(var L='',M=0,j=I.length;M<j;M++)L+=127<I.charCodeAt(M)?'x':I[M];if(!L.match(o)){var N=J.slice(0,E),O=J.slice(E+1),P=I.match(p);P&&(N.push(P[1]),O.unshift(P[2])),O.length&&(x='/'+O.join('.')+x),this.hostname=N.join('.');break}}this.hostname=this.hostname.length>255?'':this.hostname.toLowerCase(),H||(this.hostname=f.toASCII(this.hostname));var Q=this.port?':'+this.port:'',R=this.hostname||'';this.host=R+Q,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==x[0]&&(x='/'+x))}if(!q[A])for(var h,E=0,K=k.length;E<K;E++)if(h=k[E],-1!==x.indexOf(h)){var S=encodeURIComponent(h);S===h&&(S=escape(h)),x=x.split(h).join(S)}var T=x.indexOf('#');-1!==T&&(this.hash=x.substr(T),x=x.slice(0,T));var U=x.indexOf('?');if(-1===U?b&&(this.search='',this.query={}):(this.search=x.substr(U),this.query=x.substr(U+1),b&&(this.query=u.parse(this.query)),x=x.slice(0,U)),x&&(this.pathname=x),t[A]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var Q=this.pathname||'',V=this.search||'';this.path=Q+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||'';a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,':'),a+='@');var b=this.protocol||'',c=this.pathname||'',d=this.hash||'',e=!1,f='';this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(e+=':'+this.port)),this.query&&g.isObject(this.query)&&Object.keys(this.query).length&&(f=u.stringify(this.query));var h=this.search||f&&'?'+f||'';return b&&':'!==b.substr(-1)&&(b+=':'),this.slashes||(!b||t[b])&&!1!==e?(e='//'+(e||''),c&&'/'!==c.charAt(0)&&(c='/'+c)):!e&&(e=''),d&&'#'!==d.charAt(0)&&(d='#'+d),h&&'?'!==h.charAt(0)&&(h='?'+h),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),h=h.replace('#','%23'),b+e+c+h+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(g.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c,e=new d,f=Object.keys(this),h=0;h<f.length;h++)c=f[h],e[c]=this[c];if(e.hash=a.hash,''===a.href)return e.href=e.format(),e;if(a.slashes&&!a.protocol){for(var j,l=Object.keys(a),m=0;m<l.length;m++)j=l[m],'protocol'!==j&&(e[j]=a[j]);return t[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname='/'),e.href=e.format(),e}if(a.protocol&&a.protocol!==e.protocol){if(!t[a.protocol]){for(var n,k=Object.keys(a),o=0;o<k.length;o++)n=k[o],e[n]=a[n];return e.href=e.format(),e}if(e.protocol=a.protocol,!a.host&&!r[a.protocol]){for(var q=(a.pathname||'').split('/');q.length&&!(a.host=q.shift()););a.host||(a.host=''),a.hostname||(a.hostname=''),''!==q[0]&&q.unshift(''),2>q.length&&q.unshift(''),e.pathname=q.join('/')}else e.pathname=a.pathname;if(e.search=a.search,e.query=a.query,e.host=a.host||'',e.auth=a.auth,e.hostname=a.hostname||a.host,e.port=a.port,e.pathname||e.search){var u=e.pathname||'',p=e.search||'';e.path=u+p}return e.slashes=e.slashes||a.slashes,e.href=e.format(),e}var s=e.pathname&&'/'===e.pathname.charAt(0),v=a.host||a.pathname&&'/'===a.pathname.charAt(0),w=v||s||e.host&&a.pathname,x=w,y=e.pathname&&e.pathname.split('/')||[],q=a.pathname&&a.pathname.split('/')||[],z=e.protocol&&!t[e.protocol];if(z&&(e.hostname='',e.port=null,e.host&&(''===y[0]?y[0]=e.host:y.unshift(e.host)),e.host='',a.protocol&&(a.hostname=null,a.port=null,a.host&&(''===q[0]?q[0]=a.host:q.unshift(a.host)),a.host=null),w=w&&(''===q[0]||''===y[0])),v)e.host=a.host||''===a.host?a.host:e.host,e.hostname=a.hostname||''===a.hostname?a.hostname:e.hostname,e.search=a.search,e.query=a.query,y=q;else if(q.length)y||(y=[]),y.pop(),y=y.concat(q),e.search=a.search,e.query=a.query;else if(!g.isNullOrUndefined(a.search)){if(z){e.hostname=e.host=y.shift();var A=e.host&&0<e.host.indexOf('@')&&e.host.split('@');A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return e.search=a.search,e.query=a.query,g.isNull(e.pathname)&&g.isNull(e.search)||(e.path=(e.pathname?e.pathname:'')+(e.search?e.search:'')),e.href=e.format(),e}if(!y.length)return e.pathname=null,e.path=e.search?'/'+e.search:null,e.href=e.format(),e;for(var B=y.slice(-1)[0],C=(e.host||a.host||1<y.length)&&('.'===B||'..'===B)||''===B,D=0,E=y.length;0<=E;E--)B=y[E],'.'===B?y.splice(E,1):'..'===B?(y.splice(E,1),D++):D&&(y.splice(E,1),D--);if(!w&&!x)for(;D--;D)y.unshift('..');w&&''!==y[0]&&(!y[0]||'/'!==y[0].charAt(0))&&y.unshift(''),C&&'/'!==y.join('/').substr(-1)&&y.push('');var i=''===y[0]||y[0]&&'/'===y[0].charAt(0);if(z){e.hostname=e.host=i?'':y.length?y.shift():'';var A=e.host&&0<e.host.indexOf('@')&&e.host.split('@');A&&(e.auth=A.shift(),e.host=e.hostname=A.shift())}return w=w||e.host&&y.length,w&&!i&&y.unshift(''),y.length?e.pathname=y.join('/'):(e.pathname=null,e.path=null),g.isNull(e.pathname)&&g.isNull(e.search)||(e.path=(e.pathname?e.pathname:'')+(e.search?e.search:'')),e.auth=a.auth||e.auth,e.slashes=e.slashes||a.slashes,e.href=e.format(),e},d.prototype.parseHost=function(){var a=this.host,b=h.exec(a);b&&(b=b[0],':'!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},function(a){'use strict';a.exports={isString:function(a){return'string'==typeof a},isObject:function(a){return'object'==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},function(a){var b=function(){return this}();try{b=b||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(b=window)}a.exports=b},function(a){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],!a.children&&(a.children=[]),Object.defineProperty(a,'loaded',{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,'id',{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b,c){'use strict';(function(b){const d=c(4),e=c(5),f=c(1);a.exports=class{static getHttpHandler(){return'undefined'==typeof XMLHttpRequest?'undefined'==typeof b?null:new d:new e}static resolveArgs(a){if(2<=a.length)return{options:a[0],callback:a[1]};if(1==a.length)switch(typeof a[0]){case'object':return{options:a[0],callback:()=>{}};case'function':return{options:{},callback:a[0]};}else return{options:{},callback:()=>{}}}static doFetch(a,b,c){const d=this.getHttpHandler();if(null!==d)return new Promise((e,f)=>{try{d.fetch(a,b,c,e,f)}catch(a){f(a)}});throw new f(new Error('No HTTP Handler found.'))}static fetch(a,...b){const{options:c,callback:d}=this.resolveArgs(b);this.doFetch(a,c,d)}static get(a,...b){const{options:c,callback:d}=this.resolveArgs(b);return c.method='GET',this.doFetch(a,c,d)}static post(a,...b){const{options:c,callback:d}=this.resolveArgs(b);return c.method='POST',this.doFetch(a,c,d)}}}).call(b,c(3))},function(a){'use strict';a.exports=class{constructor(a){this.abort=()=>{a.isAborted=!0,a.abort()}}}},function(a){'use strict';a.exports=class{constructor(a){this.toString=()=>{return a},this.text=()=>{return a},this.json=()=>{return JSON.parse(a)}}}},function(b){b.exports=a}])});
//# sourceMappingURL=bees-request.min.js.map